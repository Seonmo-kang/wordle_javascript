var isWordBoolean,secretWord="",hint="",wordLength=5,maxAttempt=6,gameOver=!1,arr=new Array,row=0,col=0;function initialize(){for(let e=0;e<maxAttempt;e++)for(let t=0;t<wordLength;t++){let n=document.createElement("span");n.id=e.toString()+"-"+t.toString(),n.classList.add("tile"),n.innerText="",document.getElementById("attempt").appendChild(n)}axios.get("http://seonmo-kang-wordle-clone.us-east-2.elasticbeanstalk.com/newWord").then(e=>{null==e.data.word.match("^[aA-zZ]{5}$")?location.reload():(secretWord=e.data.word,hint=e.data.results[0].definition.toString())}).catch(e=>{console.error(e)})}function game(){document.addEventListener("keyup",e=>{if(gameOver)alert("you win!");else if("KeyA"<=e.code&&e.code<="KeyZ"){if(col<wordLength){let t=document.getElementById(row.toString()+"-"+col.toString());""==t.innerText&&(t.innerText=e.code[3],col+=1)}}else if("Backspace"==e.code)typeBacksapce();else if("Enter"==e.code){if(5!=col)return;isWord()}})}function typeKeyboard(){const e=document.querySelectorAll(".row button");for(let t of e)t.onclick=(({target:e})=>{let t=document.getElementById(row.toString()+"-"+col.toString());const n=e.getAttribute("data-key");col<wordLength&&"Enter"!=n&&"Backspace"!=n?(t.innerText=n,col+=1):"Enter"==n?isWord():"Backspace"==n&&typeBacksapce()})}function typeEnter(){let e=0,t=0,n=0;for(let o=0;o<wordLength;o++){let r=document.getElementById(row.toString()+"-"+o.toString()),c=r.innerText;const d=document.querySelector(`[data-key=${c}]`);let i=c.toLowerCase();secretWord[o]==i?(r.classList.add("correct"),d.style="background-color: green",e+=1):secretWord.includes(i)?(r.classList.add("present"),d.style="background-color: orange",t+=1):(r.classList.add("absent"),d.style="background-color: brown",n+=1);let l={correct:e,present:t,absent:n};arr[row]=l}5==e&&(gameOver=!0,result()),row+=1,col=0,gameOver||row!=maxAttempt||result()}function typeBacksapce(){0<col&&col<=wordLength&&(col-=1),document.getElementById(row.toString()+"-"+col.toString()).innerText=""}function result(){let e=0,t=document.getElementById("data-row"),n=secretWord;document.getElementById("result").innerText=`Answer is ${n}`;for(let n of arr){e+=1;let o=document.createElement("tr");o.id=e,o.innerHTML=`<td>${e}</td> \n                        <td>${n.absent}</td>\n                        <td>${n.present}</td>\n                        <td>${n.correct}</td>`,t.appendChild(o)}if(6!=e)for(let n=e;n<6;n++){e+=1;let n=document.createElement("tr");n.id=e,n.innerHTML=`<td>${e}</td> \n                            <td>0</td>\n                            <td>0</td>\n                            <td>0</td>`,t.appendChild(n)}document.getElementById("overlay").style.display="flex"}window.onload=function(){initialize(),typeKeyboard(),game(),clickXmark(),clickHint()};var isDuplicated="";function isWord(){var e="";for(let t=0;t<wordLength;t++){e+=document.getElementById(row.toString()+"-"+t.toString()).innerText.toLowerCase()}if(isDuplicated==e)return popupAlert("same request");isDuplicated=e,axios.get(`http://seonmo-kang-wordle-clone.us-east-2.elasticbeanstalk.com/isWord/?word=${e}`).then(e=>{e.data?typeEnter():popupAlert("That word does not exist")}).catch(e=>{console.error(e)})}var count=0;function popupAlert(e){count++;let t=document.getElementById("game-toster"),n=document.createElement("div");n.id=`toster-${count}`,n.classList.add("toster"),n.innerHTML=`<h2>${e}</h2>`,t.appendChild(n),wait(1500,count)}const wait=(e,t)=>new Promise(()=>setTimeout(()=>{let e=document.getElementById("game-toster"),n=document.getElementById(`toster-${t}`);e.removeChild(n)},e));function clickXmark(){document.getElementById("xmark").onclick=(()=>{window.location.reload()})}var isClickHint=!1;function clickHint(){document.getElementById("question").onclick=(()=>{isClickHint=!isClickHint;let e=document.getElementById("hint"),t=document.createElement("span");t.id="hintSentence";let n=document.getElementById("hintSentence");isClickHint?(t.innerText=hint,e.appendChild(t)):e.removeChild(n)})}